# AI-Rules 회의록: 거버넌스 고도화 (환경변수, 컨테이너, Spec-First)

**일시**: 2026-01-17  
**참석자**: [페르소나 기반 검토] Senior Software Engineer, Research Lead, System Architect, Project Manager  
**주제**: 환경변수 관리, 컨테이너 전략, Spec-First 프로세스 도입

---

## 1. 변경 제안 요약

### 변경 동기 (Why)
프로젝트의 재현성, 보안, 그리고 아키텍처 일관성을 확보하기 위함. 구현 전 강력한 스펙 정의를 통해 시행착오를 줄이고, 컨테이너와 환경변수 표준화를 통해 "내 컴퓨터에선 되는데" 문제를 해결함.

### 변경 내용 (What)
1. **환경변수 관리**: `.env.example` 필수화, 환경변수 상세 설명 문서화, 비밀번호/키 Git 노출 방지 규칙 강화.
2. **컨테이너 전략**: 프로젝트 격리를 위한 Docker/DevContainer 사용 의무화 또는 권장.
3. **Spec-First**: 기능 구현 전 "상세 설계/명세서" 작성이 선행되어야 하며, 사용자 승인 후 코드 작성 시작.

### 예상 영향 (Impact)
- **긍정**: 개발 환경 구축 자동화, 보안 리스크 감소, 구현 품질 비약적 향상.
- **부정**: 개발 시작 전 준비 시간(Overhead) 증가.

---

## 2. 페르소나 검토 (3라운드)

### 라운드 1: 독립 의견

#### Senior Software Engineer (시니어 개발자)
**입장**: 찬성  
**의견**:
- Spec-First는 나중에 코드 뒤집는 일을 방지하므로 필수적임. 단, 스펙이 너무 장황해지면 안 됨.
- 환경변수 관리는 타입스크립트 환경이라면 `zod` 등을 활용한 런타임 검증까지 포함하면 좋겠음.
- 컨테이너는 초기 설정이 귀찮을 수 있지만, 장기적으로 라이브러리 충돌을 막아줌.

#### Research Lead (연구 리드)
**입장**: 조건부 찬성  
**의견**:
- 연구용 코드에서 컨테이너는 CUDA 버전이나 복잡한 종속성 관리에 매우 유용함.
- 하지만 Spec-First가 연구의 유연성(탐색적 코드 작성)을 방해할까 우려됨.
- **조건**: 연구 단계(Exploratory)에서는 스펙 정의를 간소화할 수 있는 예외 조항 필요.

#### System Architect (시스템 아키텍트)
**입장**: 강력 찬성  
**의견**:
- 환경변수 주입 방식과 컨테이너 격리는 보안과 배포 자동화의 기초임.
- Spec-First에 인프라 요구사항(리소스 배정, 포트 구성 등)이 반드시 포함되어야 함.
- `.env` 파일을 관리하는 별도의 `secrets` 디렉터리나 외부 Vault 서비스와의 연계를 고려해야 함.

#### Project Manager (프로젝트 매니저)
**입장**: 찬성  
**의견**:
- Spec-First는 예측 가능성을 높여줌. 일정 산정 시 스펙 작성 기간을 명시적으로 포함하겠음.
- 컨테이너 전략은 신규 팀원 온보딩 시간을 획기적으로 줄일 수 있음.

---

### 라운드 2: 반박 및 보완

#### Senior Software Engineer
- Research Lead의 유연성 우려에 동의. "실험적 연구(POC)"에 대해서는 스펙의 깊이를 조절할 수 있게 명시하자.
- System Architect의 인프라 명세 추가 의견 지지.

#### Research Lead
- Architect의 인프라 요구사항 포함 의견 환영. 연구 모델 실행 시 메모리/GPU 요구사항이 스펙에 명시되면 지원받기 쉬워짐.
- 환경변수 문서화 시 데이터 셋 경로 등 연구 특화 변수 섹션을 분리하자.

#### System Architect
- Senior Engineer의 런타임 검증 의견은 아주 좋음. `.env.example`뿐만 아니라 검증 스크립트 작성도 권장사항으로 넣자.
- "격리"를 위해 Docker 외에 가상환경(venv/conda) 사용 기준도 정립 필요.

#### Project Manager
- "스펙 승인 후 구현"이라는 단계를 명시할 때, 사용자(클라이언트)가 이해하기 쉬운 형식(Markdown + Mermaid)을 표준으로 정하자.

---

### 라운드 3: 최종 입장 및 타협안

#### Senior Software Engineer
**최종 입장**: 찬성  
- 애플리케이션/인프라/연구 각 분야별 스펙 템플릿 제공 제안.

#### Research Lead
**최종 입장**: 찬성  
- "연구용 스펙"은 가설과 데이터 요구사항 위주로 정의하되, 코드 명세는 유연하게 가져가는 것으로 타협.

#### System Architect
**최종 입장**: 찬성  
- 컨테이너 전략에 Dockerfile 최적화 및 보안 스캔 원칙 추가.

#### Project Manager
**최종 입장**: 찬성  
- 모든 산출물은 한글로 작성(v1.1.0 준수)하되, 기술 용어는 영어 병기 허용.

---

## 3. PM 최종 보고서

### 합의 사항
- **환경변수**: `.env.example` 유지 및 모든 외부 변수 사용 전 문서화 필수. 시크릿은 절대 Git에 포함하지 않음.
- **컨테이너**: Docker 기반 환경을 기본으로 하며, 가상 디렉터리 및 포워딩 전략을 명시함.
- **Spec-First**: 구현 전 `specification.md` 작성 및 사용자 승인 필수. 메인 체크리스트에 'Spec Approval' 단계 삽입.
- **유연성**: 실험적 연구나 긴급 패치의 경우 스펙 정의 범위를 축소할 수 있음.

### 최종 권고
**권고안**: 승인  
**근거**: 프로젝트 규모가 커질수록 아키텍처와 환경 제어의 중요성이 커짐. 제안된 거버넌스는 협업 안정성을 극대화할 것임.

---

## 4. 합의된 변경 (System Update)

- `ai-rules/core_principles.md` 업데이트:
  - **6. Env & Isolation (격리 및 환경)**: 환경변수 및 컨테이너 전략 명시
  - **7. Spec-First (설계 우선)**: 구현 전 상세 명세 작성 및 승인 프로세스 의무화
- 버전: v1.2.0
- 적용 범위: 모든 신규 기능 및 연구 작업

---

## 5. 향후 조치 사항 (Action Items)

- [ ] `core_principles.md` (v1.2.0) 수정
- [ ] `ai-rules/HISTORY.md` 및 `ai-rules/changes/` 상세 문서 작성
- [ ] `.agent/rules/ai-rules.md` 요약본 업데이트
- [ ] Spec 및 Env 관련 템플릿 작성 (`ai-rules/tasks/` 하위)
